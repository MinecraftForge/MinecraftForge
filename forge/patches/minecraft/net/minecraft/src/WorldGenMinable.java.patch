--- ../src_base/minecraft/net/minecraft/src/WorldGenMinable.java	0000-00-00 00:00:00.000000000 -0000
+++ ../src_work/minecraft/net/minecraft/src/WorldGenMinable.java	0000-00-00 00:00:00.000000000 -0000
@@ -6,6 +6,7 @@
 {
     /** The block ID of the ore to be placed using this generator. */
     private int minableBlockId;
+    private int minableBlockMetadata;
 
     /** The number of blocks to generate. */
     private int numberOfBlocks;
@@ -14,6 +15,14 @@
     {
         this.minableBlockId = par1;
         this.numberOfBlocks = par2;
+        this.minableBlockMetadata = 0;
+    }
+
+    public WorldGenMinable(int par1, int par2, int par3)
+    {
+        this.minableBlockId = par1;
+        this.numberOfBlocks = par2;
+        this.minableBlockMetadata = par3;
     }
 
     public boolean generate(World par1World, Random par2Random, int par3, int par4, int par5)
@@ -57,9 +66,10 @@
                             {
                                 double var45 = ((double)var44 + 0.5D - var24) / (var28 / 2.0D);
 
-                                if (var39 * var39 + var42 * var42 + var45 * var45 < 1.0D && par1World.getBlockId(var38, var41, var44) == Block.stone.blockID)
+                                Block block = Block.blocksList[par1World.getBlockId(var38, var41, var44)];
+                                if (var39 * var39 + var42 * var42 + var45 * var45 < 1.0D && (block != null && block.isGenMineableReplaceable(par1World, var38, var41, var44)))
                                 {
-                                    par1World.setBlock(var38, var41, var44, this.minableBlockId);
+                                    par1World.setBlockAndMetadata(var38, var41, var44, this.minableBlockId, this.minableBlockMetadata);
                                 }
                             }
                         }
