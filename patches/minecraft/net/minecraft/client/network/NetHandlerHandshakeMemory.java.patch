--- a/net/minecraft/client/network/NetHandlerHandshakeMemory.java
+++ b/net/minecraft/client/network/NetHandlerHandshakeMemory.java
@@ -20,6 +20,7 @@
    }
 
    public void processHandshake(CPacketHandshake packetIn) {
+      if (!net.minecraftforge.fml.server.ServerLifecycleHooks.handleServerLogin(packetIn, this.networkManager)) return;
       this.networkManager.setConnectionState(packetIn.getRequestedState());
       this.networkManager.setNetHandler(new NetHandlerLoginServer(this.server, this.networkManager));
    }
