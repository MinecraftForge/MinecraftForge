--- ../src-base/minecraft/net/minecraft/client/network/NetHandlerLoginClient.java
+++ ../src-work/minecraft/net/minecraft/client/network/NetHandlerLoginClient.java
@@ -104,7 +104,10 @@
     {
         this.field_175091_e = p_147390_1_.func_179730_a();
         this.field_147393_d.func_150723_a(EnumConnectionState.PLAY);
-        this.field_147393_d.func_150719_a(new NetHandlerPlayClient(this.field_147394_b, this.field_147395_c, this.field_147393_d, this.field_175091_e));
+        net.minecraftforge.fml.common.network.internal.FMLNetworkHandler.fmlClientHandshake(this.field_147393_d);
+        NetHandlerPlayClient nhpc = new NetHandlerPlayClient(this.field_147394_b, this.field_147395_c, this.field_147393_d, this.field_175091_e);
+        this.field_147393_d.func_150719_a(nhpc);
+        net.minecraftforge.fml.client.FMLClientHandler.instance().setPlayClient(nhpc);
     }
 
     public void func_147231_a(IChatComponent p_147231_1_)
