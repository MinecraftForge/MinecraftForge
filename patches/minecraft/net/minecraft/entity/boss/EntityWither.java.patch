--- ../src_base/minecraft/net/minecraft/entity/boss/EntityWither.java
+++ ../src_work/minecraft/net/minecraft/entity/boss/EntityWither.java
@@ -28,6 +28,10 @@
 import net.minecraft.util.DamageSource;
 import net.minecraft.util.MathHelper;
 import net.minecraft.world.World;
+// CraftBukkit start
+import org.bukkit.craftbukkit.event.CraftEventFactory;
+import org.bukkit.event.entity.ExplosionPrimeEvent;
+// CraftBukkit end
 
 public class EntityWither extends EntityMob implements IBossDisplayData, IRangedAttackMob
 {
@@ -45,7 +49,7 @@
     public EntityWither(World par1World)
     {
         super(par1World);
-        this.setEntityHealth(this.func_110138_aP());
+        this.setHealth(this.getMaxHealth());
         this.setSize(0.9F, 4.0F);
         this.isImmuneToFire = true;
         this.getNavigator().setCanSwim(true);
@@ -236,7 +240,16 @@
 
             if (i <= 0)
             {
-                this.worldObj.newExplosion(this, this.posX, this.posY + (double)this.getEyeHeight(), this.posZ, 7.0F, false, this.worldObj.getGameRules().getGameRuleBooleanValue("mobGriefing"));
+                // CraftBukkit start
+                ExplosionPrimeEvent event = new ExplosionPrimeEvent(this.getBukkitEntity(), 7.0F, false);
+                this.worldObj.getServer().getPluginManager().callEvent(event);
+
+                if (!event.isCancelled())
+                {
+                    this.worldObj.newExplosion(this, this.posX, this.posY + (double) this.getEyeHeight(), this.posZ, event.getRadius(), event.getFire(), this.worldObj.getGameRules().getGameRuleBooleanValue("mobGriefing"));
+                }
+
+                // CraftBukkit end
                 this.worldObj.func_82739_e(1013, (int)this.posX, (int)this.posY, (int)this.posZ, 0);
             }
 
@@ -244,7 +257,7 @@
 
             if (this.ticksExisted % 10 == 0)
             {
-                this.heal(10.0F);
+                this.heal(10.0F, org.bukkit.event.entity.EntityRegainHealthEvent.RegainReason.WITHER_SPAWN); // CraftBukkit
             }
         }
         else
@@ -357,6 +370,13 @@
 
                                 if (i3 > 0 && i3 != Block.bedrock.blockID && i3 != Block.endPortal.blockID && i3 != Block.endPortalFrame.blockID)
                                 {
+                                    // CraftBukkit start
+                                    if (CraftEventFactory.callEntityChangeBlockEvent(this, j2, k2, l2, 0, 0).isCancelled())
+                                    {
+                                        continue;
+                                    }
+
+                                    // CraftBukkit end
                                     flag = this.worldObj.destroyBlock(j2, k2, l2, true) || flag;
                                 }
                             }
@@ -380,7 +400,7 @@
     public void func_82206_m()
     {
         this.func_82215_s(220);
-        this.setEntityHealth(this.func_110138_aP() / 3.0F);
+        this.setHealth(this.getMaxHealth() / 3.0F);
     }
 
     /**
@@ -541,7 +561,11 @@
      */
     protected void dropFewItems(boolean par1, int par2)
     {
-        this.dropItem(Item.netherStar.itemID, 1);
+        // CraftBukkit start
+        java.util.List<org.bukkit.inventory.ItemStack> loot = new java.util.ArrayList<org.bukkit.inventory.ItemStack>();
+        loot.add(new org.bukkit.inventory.ItemStack(Item.netherStar.itemID, 1));
+        CraftEventFactory.callEntityDeathEvent(this, loot);
+        // CraftBukkit end
     }
 
     /**
@@ -584,12 +608,12 @@
         return true;
     }
 
-    protected void func_110147_ax()
-    {
-        super.func_110147_ax();
-        this.func_110148_a(SharedMonsterAttributes.field_111267_a).func_111128_a(300.0D);
-        this.func_110148_a(SharedMonsterAttributes.field_111263_d).func_111128_a(0.6000000238418579D);
-        this.func_110148_a(SharedMonsterAttributes.field_111265_b).func_111128_a(40.0D);
+    protected void applyEntityAttributes()
+    {
+        super.applyEntityAttributes();
+        this.getEntityAttribute(SharedMonsterAttributes.maxHealth).setAttribute(300.0D);
+        this.getEntityAttribute(SharedMonsterAttributes.movementSpeed).setAttribute(0.6000000238418579D);
+        this.getEntityAttribute(SharedMonsterAttributes.followRange).setAttribute(40.0D);
     }
 
     @SideOnly(Side.CLIENT)
@@ -633,7 +657,7 @@
      */
     public boolean isArmored()
     {
-        return this.func_110143_aJ() <= this.func_110138_aP() / 2.0F;
+        return this.getHealth() <= this.getMaxHealth() / 2.0F;
     }
 
     /**
