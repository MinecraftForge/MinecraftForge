--- a/net/minecraft/entity/item/FallingBlockEntity.java
+++ b/net/minecraft/entity/item/FallingBlockEntity.java
@@ -153,7 +153,7 @@
                               ((FallingBlock)block).func_176502_a_(this.field_70170_p, blockpos1, this.field_175132_d, blockstate, this);
                            }
 
-                           if (this.field_145810_d != null && block instanceof ITileEntityProvider) {
+                           if (this.field_145810_d != null && this.field_175132_d.hasTileEntity()) {
                               TileEntity tileentity = this.field_70170_p.func_175625_s(blockpos1);
                               if (tileentity != null) {
                                  CompoundNBT compoundnbt = tileentity.func_189515_b(new CompoundNBT());
-            if (flag && (double)this.field_70146_Z.nextFloat() < (double)0.05F + (double)i * 0.05D) {
+            if (flag && (double)this.field_70146_Z.nextFloat() < (double)0.05F + (double)i * 0.05D && !net.minecraftforge.common.ForgeHooks.onAnvilDamageFalling(this.field_175132_d, this.field_70122_E ? this.func_130014_f_().func_180495_p(this.func_226270_aj_()) : null)) {
                BlockState blockstate = AnvilBlock.func_196433_f(this.field_175132_d);
                if (blockstate == null) {
                   this.field_145808_f = true;
