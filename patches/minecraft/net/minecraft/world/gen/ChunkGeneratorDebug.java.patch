--- ../src-base/minecraft/net/minecraft/world/gen/ChunkGeneratorDebug.java
+++ ../src-work/minecraft/net/minecraft/world/gen/ChunkGeneratorDebug.java
@@ -52,12 +52,25 @@
         chunk.func_76603_b();
         Biome[] abiome = this.field_177463_c.func_72959_q().func_76933_b((Biome[])null, p_185932_1_ * 16, p_185932_2_ * 16, 16, 16);
         byte[] abyte = chunk.func_76605_m();
+        byte[] localizedBiomeArray = new byte[256]; int maxBiomeId = 0; List<Biome> localBiomes = chunk.getLocalBiomes(); localBiomes.clear(); Short[] localBiomeIds = chunk.getLocalBiomeIds();
 
         for (int i1 = 0; i1 < abyte.length; ++i1)
         {
+            int localBiomeIndex = localBiomes.indexOf(abiome[i1]);
+            if(localBiomeIndex < 0)
+            {
+                int biomeId = Biome.func_185362_a(abiome[i1]);
+                maxBiomeId = Math.max(maxBiomeId, biomeId);
+                localBiomeIds[localBiomeIndex = localBiomes.size()] = (short)(biomeId & 65535);
+                localBiomes.add(abiome[i1]);
+            }
+            localizedBiomeArray[i1] = (byte)localBiomeIndex;
             abyte[i1] = (byte)Biome.func_185362_a(abiome[i1]);
         }
 
+        if (maxBiomeId > 255) chunk.func_76616_a(localizedBiomeArray);
+        else localBiomes.clear();
+
         chunk.func_76603_b();
         return chunk;
     }
