--- ../src-base/minecraft/net/minecraft/network/play/server/SPacketWindowItems.java
+++ ../src-work/minecraft/net/minecraft/network/play/server/SPacketWindowItems.java
@@ -2,16 +2,20 @@
 
 import java.io.IOException;
 import java.util.List;
+
+import net.minecraft.entity.player.EntityPlayerMP;
 import net.minecraft.item.ItemStack;
 import net.minecraft.network.Packet;
 import net.minecraft.network.PacketBuffer;
 import net.minecraft.network.play.INetHandlerPlayClient;
 import net.minecraft.util.NonNullList;
+import net.minecraftforge.common.util.PacketUtil;
 import net.minecraftforge.fml.relauncher.Side;
 import net.minecraftforge.fml.relauncher.SideOnly;
 
 public class SPacketWindowItems implements Packet<INetHandlerPlayClient>
 {
+    private EntityPlayerMP player;
     private int field_148914_a;
     private List<ItemStack> field_148913_b;
 
@@ -19,8 +23,9 @@
     {
     }
 
-    public SPacketWindowItems(int p_i47317_1_, NonNullList<ItemStack> p_i47317_2_)
+    public SPacketWindowItems(EntityPlayerMP player, int p_i47317_1_, NonNullList<ItemStack> p_i47317_2_)
     {
+        this.player = player;
         this.field_148914_a = p_i47317_1_;
         this.field_148913_b = NonNullList.<ItemStack>func_191197_a(p_i47317_2_.size(), ItemStack.field_190927_a);
 
@@ -50,7 +55,7 @@
 
         for (ItemStack itemstack : this.field_148913_b)
         {
-            p_148840_1_.func_150788_a(itemstack);
+            PacketUtil.writeItemStackFromServerToClient(p_148840_1_, this.player, itemstack);
         }
     }
 
