--- ../src-base/minecraft/net/minecraft/inventory/ContainerPlayer.java
+++ ../src-work/minecraft/net/minecraft/inventory/ContainerPlayer.java
@@ -48,8 +48,13 @@
                 }
                 public boolean func_75214_a(ItemStack p_75214_1_)
                 {
-                    return p_75214_1_ == null ? false : (p_75214_1_.func_77973_b() instanceof ItemArmor ? ((ItemArmor)p_75214_1_.func_77973_b()).field_77881_a == k : (p_75214_1_.func_77973_b() != Item.func_150898_a(Blocks.field_150423_aK) && p_75214_1_.func_77973_b() != Items.field_151144_bL ? false : k == 0));
+                    if (p_75214_1_ == null) return false;
+                    return p_75214_1_.func_77973_b().isValidArmor(p_75214_1_, k, field_82862_h) && p_75214_1_.func_77973_b().canEquip(field_82862_h, p_75214_1_);
                 }
+                public boolean func_82869_a(EntityPlayer par1EntityPlayer)
+                {
+                    return func_75216_d() ? func_75211_c().func_77973_b().canUnequip(par1EntityPlayer, func_75211_c()) : true;
+                }
                 @SideOnly(Side.CLIENT)
                 public IIcon func_75212_b()
                 {
@@ -134,7 +139,7 @@
                     return null;
                 }
             }
-            else if (itemstack.func_77973_b() instanceof ItemArmor && !((Slot)this.field_75151_b.get(5 + ((ItemArmor)itemstack.func_77973_b()).field_77881_a)).func_75216_d())
+            else if (itemstack.func_77973_b() instanceof ItemArmor && !((Slot)this.field_75151_b.get(5 + ((ItemArmor)itemstack.func_77973_b()).field_77881_a)).func_75216_d() && itemstack.func_77973_b().canEquip(p_82846_1_, itemstack))
             {
                 int j = 5 + ((ItemArmor)itemstack.func_77973_b()).field_77881_a;
 
