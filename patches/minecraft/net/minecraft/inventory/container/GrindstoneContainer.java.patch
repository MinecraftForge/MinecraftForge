--- a/net/minecraft/inventory/container/GrindstoneContainer.java
+++ b/net/minecraft/inventory/container/GrindstoneContainer.java
@@ -27,6 +27,7 @@
       }
    };
    private final IWorldPosCallable field_217015_e;
+   public int xpOnCraft = -1;
 
    public GrindstoneContainer(int p_i50080_1_, PlayerInventory p_i50080_2_) {
       this(p_i50080_1_, p_i50080_2_, IWorldPosCallable.field_221489_a);
@@ -53,6 +54,7 @@
          public ItemStack func_190901_a(PlayerEntity p_190901_1_, ItemStack p_190901_2_) {
             p_i50081_3_.func_221486_a((p_216944_1_, p_216944_2_) -> {
                int l = this.func_216942_a(p_216944_1_);
+               xpOnCraft = -1;
 
                while(l > 0) {
                   int i1 = ExperienceOrbEntity.func_70527_a(l);
@@ -68,6 +70,7 @@
          }
 
          private int func_216942_a(World p_216942_1_) {
+            if (xpOnCraft >= 0) return xpOnCraft;
             int l = 0;
             l = l + this.func_216943_e(GrindstoneContainer.this.field_217014_d.func_70301_a(0));
             l = l + this.func_216943_e(GrindstoneContainer.this.field_217014_d.func_70301_a(1));
@@ -123,6 +126,7 @@
       if (!flag) {
          this.field_217013_c.func_70299_a(0, ItemStack.field_190927_a);
       } else {
+         if (!net.minecraftforge.common.ForgeHooks.onGrindstoneChangePre(itemstack, itemstack1, field_217013_c, this)) return;
          boolean flag2 = !itemstack.func_190926_b() && itemstack.func_77973_b() != Items.field_151134_bR && !itemstack.func_77948_v() || !itemstack1.func_190926_b() && itemstack1.func_77973_b() != Items.field_151134_bR && !itemstack1.func_77948_v();
          if (itemstack.func_190916_E() > 1 || itemstack1.func_190916_E() > 1 || !flag1 && flag2) {
             this.field_217013_c.func_70299_a(0, ItemStack.field_190927_a);
@@ -141,10 +145,10 @@
             }
 
             Item item = itemstack.func_77973_b();
-            int k = item.func_77612_l() - itemstack.func_77952_i();
-            int l = item.func_77612_l() - itemstack1.func_77952_i();
-            int i1 = k + l + item.func_77612_l() * 5 / 100;
-            i = Math.max(item.func_77612_l() - i1, 0);
+            int k = itemstack.func_77958_k() - itemstack.func_77952_i();
+            int l = itemstack1.func_77958_k() - itemstack1.func_77952_i();
+            int i1 = k + l + itemstack.func_77958_k() * 5 / 100;
+            i = Math.max(itemstack.func_77958_k() - i1, 0);
             itemstack2 = this.func_217011_b(itemstack, itemstack1);
             if (!itemstack2.func_77984_f()) {
                if (!ItemStack.func_77989_b(itemstack, itemstack1)) {
@@ -161,7 +165,7 @@
             itemstack2 = flag3 ? itemstack : itemstack1;
          }
 
-         this.field_217013_c.func_70299_a(0, this.func_217007_a(itemstack2, i, j));
+         net.minecraftforge.common.ForgeHooks.onGrindstoneChangePost(itemstack, itemstack1, this.func_217007_a(itemstack2, i, j), field_217013_c, this);
       }
 
       this.func_75142_b();
