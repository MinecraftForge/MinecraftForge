--- ../src_base/minecraft/net/minecraft/inventory/ContainerEnchantment.java
+++ ../src_work/minecraft/net/minecraft/inventory/ContainerEnchantment.java
@@ -12,6 +12,7 @@
 import net.minecraft.item.Item;
 import net.minecraft.item.ItemStack;
 import net.minecraft.world.World;
+import net.minecraftforge.common.ForgeHooks;
 
 public class ContainerEnchantment extends Container
 {
@@ -99,7 +100,7 @@
         if (par1IInventory == this.tableInventory)
         {
             ItemStack itemstack = par1IInventory.getStackInSlot(0);
-            int i;
+            float power;
 
             if (itemstack != null && itemstack.isItemEnchantable())
             {
@@ -107,7 +108,7 @@
 
                 if (!this.worldPointer.isRemote)
                 {
-                    i = 0;
+                    power = 0;
                     int j;
 
                     for (j = -1; j <= 1; ++j)
@@ -116,37 +117,16 @@
                         {
                             if ((j != 0 || k != 0) && this.worldPointer.isAirBlock(this.posX + k, this.posY, this.posZ + j) && this.worldPointer.isAirBlock(this.posX + k, this.posY + 1, this.posZ + j))
                             {
-                                if (this.worldPointer.getBlockId(this.posX + k * 2, this.posY, this.posZ + j * 2) == Block.bookShelf.blockID)
-                                {
-                                    ++i;
-                                }
-
-                                if (this.worldPointer.getBlockId(this.posX + k * 2, this.posY + 1, this.posZ + j * 2) == Block.bookShelf.blockID)
-                                {
-                                    ++i;
-                                }
+                                
+                                power += ForgeHooks.getEnchantPower(worldPointer, this.posX + k * 2, this.posY, this.posZ + j * 2);
+                                power += ForgeHooks.getEnchantPower(worldPointer, this.posX + k * 2, this.posY + 1, this.posZ + j * 2);
 
                                 if (k != 0 && j != 0)
                                 {
-                                    if (this.worldPointer.getBlockId(this.posX + k * 2, this.posY, this.posZ + j) == Block.bookShelf.blockID)
-                                    {
-                                        ++i;
-                                    }
-
-                                    if (this.worldPointer.getBlockId(this.posX + k * 2, this.posY + 1, this.posZ + j) == Block.bookShelf.blockID)
-                                    {
-                                        ++i;
-                                    }
-
-                                    if (this.worldPointer.getBlockId(this.posX + k, this.posY, this.posZ + j * 2) == Block.bookShelf.blockID)
-                                    {
-                                        ++i;
-                                    }
-
-                                    if (this.worldPointer.getBlockId(this.posX + k, this.posY + 1, this.posZ + j * 2) == Block.bookShelf.blockID)
-                                    {
-                                        ++i;
-                                    }
+                                    power += ForgeHooks.getEnchantPower(worldPointer, this.posX + k * 2, this.posY, this.posZ + j);
+                                    power += ForgeHooks.getEnchantPower(worldPointer, this.posX + k * 2, this.posY + 1, this.posZ + j);
+                                    power += ForgeHooks.getEnchantPower(worldPointer, this.posX + k, this.posY, this.posZ + j * 2);
+                                    power += ForgeHooks.getEnchantPower(worldPointer, this.posX + k, this.posY + 1, this.posZ + j * 2);
                                 }
                             }
                         }
@@ -154,7 +134,7 @@
 
                     for (j = 0; j < 3; ++j)
                     {
-                        this.enchantLevels[j] = EnchantmentHelper.calcItemStackEnchantability(this.rand, j, i, itemstack);
+                        this.enchantLevels[j] = EnchantmentHelper.calcItemStackEnchantability(this.rand, j, (int) power, itemstack);
                     }
 
                     this.detectAndSendChanges();
@@ -162,7 +142,7 @@
             }
             else
             {
-                for (i = 0; i < 3; ++i)
+                for (int i = 0; i < 3; ++i)
                 {
                     this.enchantLevels[i] = 0;
                 }
