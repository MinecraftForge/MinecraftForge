--- ../src-base/minecraft/net/minecraft/block/BlockRailPowered.java
+++ ../src-work/minecraft/net/minecraft/block/BlockRailPowered.java
@@ -23,9 +23,17 @@
     });
     public static final PropertyBool field_176569_M = PropertyBool.func_177716_a("powered");
 
+    private final String connectionTag;
+
     protected BlockRailPowered()
     {
+        this("powered");
+    }
+
+    protected BlockRailPowered(String connectionTag)
+    {
         super(true);
+        this.connectionTag = connectionTag;
         this.func_180632_j(this.field_176227_L.func_177621_b().func_177226_a(field_176568_b, BlockRailBase.EnumRailDirection.NORTH_SOUTH).func_177226_a(field_176569_M, Boolean.valueOf(false)));
     }
 
@@ -146,7 +154,7 @@
     {
         IBlockState iblockstate = p_176567_1_.func_180495_p(p_176567_2_);
 
-        if (iblockstate.func_177230_c() != this)
+        if (!(iblockstate.func_177230_c() instanceof BlockRailPowered) || !connectionTag.equals(((BlockRailPowered)iblockstate.func_177230_c()).connectionTag))
         {
             return false;
         }
