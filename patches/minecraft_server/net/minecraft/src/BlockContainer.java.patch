--- ../src_base/minecraft_server/net/minecraft/src/BlockContainer.java	0000-00-00 00:00:00.000000000 -0000
+++ ../src_work/minecraft_server/net/minecraft/src/BlockContainer.java	0000-00-00 00:00:00.000000000 -0000
@@ -26,7 +26,7 @@
     public void onBlockAdded(World world, int i, int j, int k)
     {
         super.onBlockAdded(world, i, j, k);
-        world.setBlockTileEntity(i, j, k, getBlockEntity());
+        world.setBlockTileEntity(i, j, k, getBlockEntity(world.getBlockMetadata(i,j,k)));
     }
 
     public void onBlockRemoval(World world, int i, int j, int k)
@@ -36,7 +36,7 @@
     }
 
     public abstract TileEntity getBlockEntity();
-
+    
     public void powerBlock(World world, int i, int j, int k, int l, int i1)
     {
         super.powerBlock(world, i, j, k, l, i1);
@@ -46,4 +46,14 @@
             tileentity.onTileEntityPowered(l, i1);
         }
     }
+    
+    /**
+     * Metatdata sensitive version of getBlockEntity
+     * @param metadata The Metatdata for the current block
+     * @return A instance of the TileEntity class associated with this block
+     */
+    public TileEntity getBlockEntity(int metadata)
+    {
+    	return getBlockEntity();
+    }
 }
