--- ../src_base/common/net/minecraft/src/MapGenStronghold.java	0000-00-00 00:00:00.000000000 -0000
+++ ../src_work/common/net/minecraft/src/MapGenStronghold.java	0000-00-00 00:00:00.000000000 -0000
@@ -1,13 +1,17 @@
 package net.minecraft.src;
 
 import java.util.ArrayList;
+import java.util.Arrays;
 import java.util.Collections;
+import java.util.LinkedList;
 import java.util.List;
 import java.util.Random;
 
+import net.minecraftforge.common.BiomeManager;
+
 public class MapGenStronghold extends MapGenStructure
 {
-    private BiomeGenBase[] allowedBiomeGenBases;
+    private ArrayList allowedBiomeGenBases;
 
     /**
      * is spawned false and set true once the defined BiomeGenBases were compared with the present ones
@@ -17,7 +21,9 @@
 
     public MapGenStronghold()
     {
-        this.allowedBiomeGenBases = new BiomeGenBase[] {BiomeGenBase.desert, BiomeGenBase.forest, BiomeGenBase.extremeHills, BiomeGenBase.swampland, BiomeGenBase.taiga, BiomeGenBase.icePlains, BiomeGenBase.iceMountains, BiomeGenBase.desertHills, BiomeGenBase.forestHills, BiomeGenBase.extremeHillsEdge, BiomeGenBase.jungle, BiomeGenBase.jungleHills};
+        this.allowedBiomeGenBases = new ArrayList<BiomeGenBase>();
+        Collections.addAll(this.allowedBiomeGenBases, new BiomeGenBase[] {BiomeGenBase.desert, BiomeGenBase.forest, BiomeGenBase.extremeHills, BiomeGenBase.swampland, BiomeGenBase.taiga, BiomeGenBase.icePlains, BiomeGenBase.iceMountains, BiomeGenBase.desertHills, BiomeGenBase.forestHills, BiomeGenBase.extremeHillsEdge, BiomeGenBase.jungle, BiomeGenBase.jungleHills});
+        this.allowedBiomeGenBases.addAll(BiomeManager.getStrongholdBiomes());
         this.structureCoords = new ChunkCoordIntPair[3];
     }
 
@@ -34,9 +40,8 @@
                 double var7 = (1.25D + var3.nextDouble()) * 32.0D;
                 int var9 = (int)Math.round(Math.cos(var4) * var7);
                 int var10 = (int)Math.round(Math.sin(var4) * var7);
-                ArrayList var11 = new ArrayList();
-                Collections.addAll(var11, this.allowedBiomeGenBases);
-                ChunkPosition var12 = this.worldObj.getWorldChunkManager().findBiomePosition((var9 << 4) + 8, (var10 << 4) + 8, 112, var11, var3);
+                
+                ChunkPosition var12 = this.worldObj.getWorldChunkManager().findBiomePosition((var9 << 4) + 8, (var10 << 4) + 8, 112, this.allowedBiomeGenBases, var3);
 
                 if (var12 != null)
                 {
@@ -102,4 +107,5 @@
 
         return var3;
     }
+    
 }
