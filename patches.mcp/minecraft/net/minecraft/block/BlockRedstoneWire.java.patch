--- ../src-base/minecraft/net/minecraft/block/BlockRedstoneWire.java
+++ ../src-work/minecraft/net/minecraft/block/BlockRedstoneWire.java
@@ -97,15 +97,15 @@
         BlockPos blockpos = pos.offset(direction);
         IBlockState iblockstate = worldIn.getBlockState(pos.offset(direction));
 
-        if (!canConnectTo(worldIn.getBlockState(blockpos), direction) && (iblockstate.func_185915_l() || !canConnectUpwardsTo(worldIn.getBlockState(blockpos.down()))))
+        if (!canConnectTo(worldIn.getBlockState(blockpos), direction, worldIn, blockpos) && (iblockstate.func_185915_l() || !canConnectUpwardsTo(worldIn, blockpos.down())))
         {
             IBlockState iblockstate1 = worldIn.getBlockState(pos.up());
 
             if (!iblockstate1.func_185915_l())
             {
-                boolean flag = worldIn.getBlockState(blockpos).func_185896_q() || worldIn.getBlockState(blockpos).getBlock() == Blocks.glowstone;
+                boolean flag = worldIn.getBlockState(blockpos).isSideSolid(worldIn, blockpos, EnumFacing.UP) || worldIn.getBlockState(blockpos).getBlock() == Blocks.glowstone;
 
-                if (flag && canConnectUpwardsTo(worldIn.getBlockState(blockpos.up())))
+                if (flag && canConnectUpwardsTo(worldIn, blockpos.up()))
                 {
                     if (iblockstate.func_185898_k())
                     {
@@ -406,21 +406,16 @@
         IBlockState iblockstate = worldIn.getBlockState(blockpos);
         boolean flag = iblockstate.func_185915_l();
         boolean flag1 = worldIn.getBlockState(pos.up()).func_185915_l();
-        return !flag1 && flag && canConnectUpwardsTo(worldIn, blockpos.up()) ? true : (canConnectTo(iblockstate, side) ? true : (iblockstate.getBlock() == Blocks.powered_repeater && iblockstate.getValue(BlockRedstoneDiode.field_185512_D) == side ? true : !flag && canConnectUpwardsTo(worldIn, blockpos.down())));
+        return !flag1 && flag && canConnectUpwardsTo(worldIn, blockpos.up()) ? true : (canConnectTo(iblockstate, side, worldIn, pos) ? true : (iblockstate.getBlock() == Blocks.powered_repeater && iblockstate.getValue(BlockRedstoneDiode.field_185512_D) == side ? true : !flag && canConnectUpwardsTo(worldIn, blockpos.down())));
     }
 
     protected static boolean canConnectUpwardsTo(IBlockAccess worldIn, BlockPos pos)
     {
-        return canConnectUpwardsTo(worldIn.getBlockState(pos));
+        return canConnectTo(worldIn.getBlockState(pos), null, worldIn, pos);
     }
 
-    protected static boolean canConnectUpwardsTo(IBlockState state)
+    protected static boolean canConnectTo(IBlockState blockState, EnumFacing side, IBlockAccess world, BlockPos pos)
     {
-        return canConnectTo(state, (EnumFacing)null);
-    }
-
-    protected static boolean canConnectTo(IBlockState blockState, EnumFacing side)
-    {
         Block block = blockState.getBlock();
 
         if (block == Blocks.redstone_wire)
@@ -434,7 +429,7 @@
         }
         else
         {
-            return blockState.func_185897_m() && side != null;
+            return blockState.getBlock().canConnectRedstone(blockState, world, pos, side);
         }
     }
 
