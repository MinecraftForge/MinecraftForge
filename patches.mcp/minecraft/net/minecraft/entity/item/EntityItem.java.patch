--- ../src-base/minecraft/net/minecraft/entity/item/EntityItem.java
+++ ../src-work/minecraft/net/minecraft/entity/item/EntityItem.java
@@ -37,6 +37,11 @@
     private String owner;
     public float hoverStart;
 
+    /**
+     * The maximum age of this EntityItem.  The item is expired once this is reached.
+     */
+    public int lifespan = 6000;
+
     public EntityItem(World worldIn, double x, double y, double z)
     {
         super(worldIn);
@@ -54,6 +59,7 @@
     {
         this(worldIn, x, y, z);
         this.setEntityItemStack(stack);
+        this.lifespan = (stack.getItem() == null ? 6000 : stack.getItem().getEntityLifespan(stack, worldIn));
     }
 
     protected boolean canTriggerWalking()
@@ -77,6 +83,8 @@
 
     public void onUpdate()
     {
+        ItemStack stack = this.getDataWatcher().getWatchableObjectItemStack(10);
+        if (stack != null && stack.getItem() != null && stack.getItem().onEntityItemUpdate(this)) return;
         if (this.getEntityItem() == null)
         {
             this.setDead();
@@ -137,8 +145,16 @@
 
             this.handleWaterMovement();
 
-            if (!this.worldObj.isRemote && this.age >= 6000)
+            ItemStack item = getDataWatcher().getWatchableObjectItemStack(10);
+
+            if (!this.worldObj.isRemote && this.age >= lifespan)
             {
+                int hook = net.minecraftforge.event.ForgeEventFactory.onItemExpire(this, item);
+                if (hook < 0) this.setDead();
+                else          this.lifespan += hook;
+            }
+            if (item != null && item.stackSize <= 0)
+            {
                 this.setDead();
             }
         }
@@ -279,6 +295,7 @@
         tagCompound.setShort("Health", (short)this.health);
         tagCompound.setShort("Age", (short)this.age);
         tagCompound.setShort("PickupDelay", (short)this.delayBeforeCanPickup);
+        tagCompound.setInteger("Lifespan", lifespan);
 
         if (this.getThrower() != null)
         {
@@ -319,20 +336,23 @@
         NBTTagCompound nbttagcompound = tagCompund.getCompoundTag("Item");
         this.setEntityItemStack(ItemStack.loadItemStackFromNBT(nbttagcompound));
 
-        if (this.getEntityItem() == null)
-        {
-            this.setDead();
-        }
+        ItemStack item = getDataWatcher().getWatchableObjectItemStack(10);
+        if (item == null || item.stackSize <= 0) this.setDead();
+        if (tagCompund.hasKey("Lifespan")) lifespan = tagCompund.getInteger("Lifespan");
     }
 
     public void onCollideWithPlayer(EntityPlayer entityIn)
     {
         if (!this.worldObj.isRemote)
         {
+            if (this.delayBeforeCanPickup > 0) return;
             ItemStack itemstack = this.getEntityItem();
             int i = itemstack.stackSize;
 
-            if (this.delayBeforeCanPickup == 0 && (this.owner == null || 6000 - this.age <= 200 || this.owner.equals(entityIn.getName())) && entityIn.inventory.addItemStackToInventory(itemstack))
+            int hook = net.minecraftforge.event.ForgeEventFactory.onItemPickup(this, entityIn, itemstack);
+            if (hook < 0) return;
+
+            if (this.delayBeforeCanPickup <= 0 && (this.owner == null || lifespan - this.age <= 200 || this.owner.equals(entityIn.getName())) && (hook == 1 || i <= 0 || entityIn.inventory.addItemStackToInventory(itemstack)))
             {
                 if (itemstack.getItem() == Item.getItemFromBlock(Blocks.log))
                 {
@@ -369,6 +389,7 @@
                     }
                 }
 
+                net.minecraftforge.fml.common.FMLCommonHandler.instance().firePlayerItemPickupEvent(entityIn, this);
                 if (!this.isSilent())
                 {
                     this.worldObj.func_184148_a((EntityPlayer)null, entityIn.posX, entityIn.posY, entityIn.posZ, SoundEvents.field_187638_cR, SoundCategory.PLAYERS, 0.2F, ((this.rand.nextFloat() - this.rand.nextFloat()) * 0.7F + 1.0F) * 2.0F);
@@ -414,11 +435,6 @@
 
         if (itemstack == null)
         {
-            if (this.worldObj != null)
-            {
-                logger.error("Item entity " + this.getEntityId() + " has no item?!");
-            }
-
             return new ItemStack(Blocks.stone);
         }
         else
@@ -492,6 +508,6 @@
     public void func_174870_v()
     {
         this.setInfinitePickupDelay();
-        this.age = 5999;
+        this.age = getEntityItem().getItem().getEntityLifespan(getEntityItem(), worldObj) - 1;
     }
 }
