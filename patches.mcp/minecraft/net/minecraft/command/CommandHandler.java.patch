--- ../src-base/minecraft/net/minecraft/command/CommandHandler.java
+++ ../src-work/minecraft/net/minecraft/command/CommandHandler.java
@@ -46,6 +46,16 @@
         }
         else if (icommand.func_184882_a(this.func_184879_a(), sender))
         {
+            net.minecraftforge.event.CommandEvent event = new net.minecraftforge.event.CommandEvent(icommand, sender, astring);
+            if (net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(event))
+            {
+                if (event.exception != null)
+                {
+                    com.google.common.base.Throwables.propagateIfPossible(event.exception);
+                }
+                return 1;
+            }
+
             if (i > -1)
             {
                 List<Entity> list = EntitySelector.<Entity>matchEntities(sender, astring[i], Entity.class);
@@ -109,7 +119,7 @@
             TextComponentTranslation textcomponenttranslation = new TextComponentTranslation("commands.generic.exception", new Object[0]);
             textcomponenttranslation.getChatStyle().setColor(TextFormatting.RED);
             sender.addChatMessage(textcomponenttranslation);
-            logger.warn("Couldn\'t process command: \'" + input + "\'");
+            logger.warn("Couldn\'t process command: \'" + input + "\'", var9);
         }
 
         return false;
