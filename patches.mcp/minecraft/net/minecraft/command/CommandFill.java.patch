--- ../src-base/minecraft/net/minecraft/command/CommandFill.java
+++ ../src-work/minecraft/net/minecraft/command/CommandFill.java
@@ -48,6 +48,7 @@
             {
                 i = parseInt(args[7], 0, 15);
             }
+            IBlockState state = block.getStateFromMeta(i);
 
             BlockPos blockpos2 = new BlockPos(Math.min(blockpos.getX(), blockpos1.getX()), Math.min(blockpos.getY(), blockpos1.getY()), Math.min(blockpos.getZ(), blockpos1.getZ()));
             BlockPos blockpos3 = new BlockPos(Math.max(blockpos.getX(), blockpos1.getX()), Math.max(blockpos.getY(), blockpos1.getY()), Math.max(blockpos.getZ(), blockpos1.getZ()));
@@ -75,7 +76,7 @@
                 NBTTagCompound nbttagcompound = new NBTTagCompound();
                 boolean flag = false;
 
-                if (args.length >= 10 && block.hasTileEntity())
+                if (args.length >= 10 && block.hasTileEntity(state))
                 {
                     String s = getChatComponentFromNthArg(sender, args, 9).getUnformattedText();
 
@@ -116,7 +117,7 @@
                                             continue;
                                         }
                                     }
-                                    else if (args[8].equals("replace") && !block.hasTileEntity())
+                                    else if (args[8].equals("replace") && !block.hasTileEntity(state))
                                     {
                                         if (args.length > 9)
                                         {
