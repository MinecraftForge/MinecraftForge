--- ../src-base/minecraft/net/minecraft/item/ItemArmor.java
+++ ../src-work/minecraft/net/minecraft/item/ItemArmor.java
@@ -38,7 +38,7 @@
             if (list.size() > 0)
             {
                 EntityLivingBase entitylivingbase = (EntityLivingBase)list.get(0);
-                int l = entitylivingbase instanceof EntityPlayer ? 1 : 0;
+                int l = 0;// Forge: We fix the indexes. Mojang Stop hard coding this!
                 int i1 = EntityLiving.getArmorPosition(stack);
                 ItemStack itemstack1 = stack.copy();
                 itemstack1.stackSize = 1;
@@ -192,7 +192,7 @@
 
         if (itemstack1 == null)
         {
-            playerIn.setCurrentItemOrArmor(i, itemStackIn.copy());
+            playerIn.setCurrentItemOrArmor(i + 1, itemStackIn.copy()); //Forge: Vanilla bug fix associated with fixed setCurrentItemOrArmor indexs for players.
             itemStackIn.stackSize = 0;
         }
 
@@ -213,6 +213,9 @@
 
         private static final String __OBFID = "CL_00001768";
 
+        //Added by forge for custom Armor materials.
+        public Item customCraftingMaterial = null;
+
         private ArmorMaterial(String name, int p_i45789_4_, int[] reductionAmounts, int enchantability)
         {
             this.name = name;
@@ -238,7 +241,15 @@
 
         public Item getRepairItem()
         {
-            return this == LEATHER ? Items.leather : (this == CHAIN ? Items.iron_ingot : (this == GOLD ? Items.gold_ingot : (this == IRON ? Items.iron_ingot : (this == DIAMOND ? Items.diamond : null))));
+            switch (this)
+            {
+                case LEATHER: return Items.leather;
+                case CHAIN:   return Items.iron_ingot;
+                case GOLD:    return Items.gold_ingot;
+                case IRON:    return Items.iron_ingot;
+                case DIAMOND: return Items.diamond;
+                default:      return customCraftingMaterial;
+            }
         }
 
         @SideOnly(Side.CLIENT)
